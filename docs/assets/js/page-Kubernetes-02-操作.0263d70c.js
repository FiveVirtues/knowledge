(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{1032:function(s,t,a){"use strict";a.r(t);var e=a(1),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"资源管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源管理"}},[s._v("#")]),s._v(" 资源管理")]),s._v(" "),e("h3",{attrs:{id:"介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),e("p",[s._v("k8s 实际上就是一个集群系统，可以在这个集群中运行一个个的容器，并将程序跑在容器中，这就叫启动服务了。")]),s._v(" "),e("p",[s._v("k8s 的最小管理单元为 pod，容器将会放到 pod 中，而 k8s 通过 pod 控制器来管理 pod，进而管理容器。")]),s._v(" "),e("p",[s._v("pod 对外提供服务，然而出于单一职责的考虑，pod 不能即管理容器又管理服务访问，所以服务访问交给 service 资源来实现功能。")]),s._v(" "),e("p",[s._v("同理，数据持久化的功能交给了存储系统。")]),s._v(" "),e("p",[s._v("学习 k8s，本质上就是学习对 pod、pod 控制器、service、存储等资源的操作。")]),s._v(" "),e("p",[e("img",{attrs:{src:a(736),alt:""}})]),s._v(" "),e("h3",{attrs:{id:"集群资源分类"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群资源分类"}},[s._v("#")]),s._v(" 集群资源分类")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("资源分类")]),s._v(" "),e("th",[s._v("资源名称")]),s._v(" "),e("th",[s._v("缩写")]),s._v(" "),e("th",[s._v("作用")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("集群级别")]),s._v(" "),e("td",[s._v("nodes")]),s._v(" "),e("td",[s._v("no")]),s._v(" "),e("td",[s._v("集群组成部分")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("namespace")]),s._v(" "),e("td",[s._v("ns")]),s._v(" "),e("td",[s._v("隔离 pod")])]),s._v(" "),e("tr",[e("td",[s._v("pod 资源")]),s._v(" "),e("td",[s._v("pods")]),s._v(" "),e("td",[s._v("po")]),s._v(" "),e("td",[s._v("装载容器")])]),s._v(" "),e("tr",[e("td",[s._v("pod 控制器")]),s._v(" "),e("td",[s._v("replicationcontrollers")]),s._v(" "),e("td",[s._v("rc")]),s._v(" "),e("td",[s._v("控制 pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("replicasets")]),s._v(" "),e("td",[s._v("rs")]),s._v(" "),e("td",[s._v("控制 pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("deployments")]),s._v(" "),e("td",[s._v("deploy")]),s._v(" "),e("td",[s._v("控制 pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("daemonsets")]),s._v(" "),e("td",[s._v("ds")]),s._v(" "),e("td",[s._v("控制 pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("jobs")]),s._v(" "),e("td"),s._v(" "),e("td",[s._v("控制 pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("cronjobs")]),s._v(" "),e("td",[s._v("cj")]),s._v(" "),e("td",[s._v("控制pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("horizontalpodautoscalers")]),s._v(" "),e("td",[s._v("hpa")]),s._v(" "),e("td",[s._v("控制pod 资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("statefulsets")]),s._v(" "),e("td",[s._v("sts")]),s._v(" "),e("td",[s._v("控制pod 资源")])]),s._v(" "),e("tr",[e("td",[s._v("服务发现")]),s._v(" "),e("td",[s._v("services")]),s._v(" "),e("td",[s._v("svc")]),s._v(" "),e("td",[s._v("统一 pod 对外接口")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("ingress")]),s._v(" "),e("td",[s._v("ing")]),s._v(" "),e("td",[s._v("统一 pod 对外接口")])]),s._v(" "),e("tr",[e("td",[s._v("存储资源")]),s._v(" "),e("td",[s._v("volumeattachments")]),s._v(" "),e("td"),s._v(" "),e("td",[s._v("存储")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("persistentvolumes")]),s._v(" "),e("td",[s._v("pv")]),s._v(" "),e("td",[s._v("存储")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("persistentvolumeclaims")]),s._v(" "),e("td",[s._v("pvc")]),s._v(" "),e("td",[s._v("存储")])]),s._v(" "),e("tr",[e("td",[s._v("配置资源")]),s._v(" "),e("td",[s._v("configmaps")]),s._v(" "),e("td",[s._v("cm")]),s._v(" "),e("td",[s._v("配置")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("secrets")]),s._v(" "),e("td"),s._v(" "),e("td",[s._v("配置")])])])]),s._v(" "),e("h3",{attrs:{id:"资源操作方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源操作方式"}},[s._v("#")]),s._v(" 资源操作方式")]),s._v(" "),e("p",[s._v("资源可以进行多种操作，可以通过 "),e("code",[s._v("--help")]),s._v(" 查看详细的操作命令。")]),s._v(" "),e("table",[e("thead",[e("tr",[e("th",[s._v("分类")]),s._v(" "),e("th",[s._v("命令")]),s._v(" "),e("th",[s._v("作用")])])]),s._v(" "),e("tbody",[e("tr",[e("td",[s._v("基础")]),s._v(" "),e("td",[s._v("create")]),s._v(" "),e("td",[s._v("创建资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("edit")]),s._v(" "),e("td",[s._v("编辑资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("get")]),s._v(" "),e("td",[s._v("获取资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("patch")]),s._v(" "),e("td",[s._v("更新资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("delete")]),s._v(" "),e("td",[s._v("删除资源")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("explain")]),s._v(" "),e("td",[s._v("展示资源文档")])]),s._v(" "),e("tr",[e("td",[s._v("调试运行")]),s._v(" "),e("td",[s._v("run")]),s._v(" "),e("td",[s._v("集群中运行指定镜像")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("expose")]),s._v(" "),e("td",[s._v("暴露资源为 service")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("describe")]),s._v(" "),e("td",[s._v("显示资源内部信息")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("logs")]),s._v(" "),e("td",[s._v("输出容器在 pod 的日志")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("attach")]),s._v(" "),e("td",[s._v("进入运行中的容器")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("exec")]),s._v(" "),e("td",[s._v("执行容器中的一个命令")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("cp")]),s._v(" "),e("td",[s._v("pod 内外复制文件")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("rollout")]),s._v(" "),e("td",[s._v("管理资源发布")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("scale")]),s._v(" "),e("td",[s._v("扩缩 pod 数量")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("autoscale")]),s._v(" "),e("td",[s._v("自动调整 pod 数量")])]),s._v(" "),e("tr",[e("td",[s._v("高级")]),s._v(" "),e("td",[s._v("apply")]),s._v(" "),e("td",[s._v("通过文件对资源进行配置")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("label")]),s._v(" "),e("td",[s._v("更新资源标签")])]),s._v(" "),e("tr",[e("td",[s._v("其他")]),s._v(" "),e("td",[s._v("cluster-info")]),s._v(" "),e("td",[s._v("显示集群信息")])]),s._v(" "),e("tr",[e("td"),s._v(" "),e("td",[s._v("version")]),s._v(" "),e("td",[s._v("展示 server 和 client 版本")])])])]),s._v(" "),e("h3",{attrs:{id:"资源管理方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源管理方式"}},[s._v("#")]),s._v(" 资源管理方式")]),s._v(" "),e("p",[s._v("k8s 中提供了三种方式：命令式对象管理、命令式对象配置、声明式对象配置。")]),s._v(" "),e("p",[s._v("命令式对象管理，直接使用命令来操作 k8s 资源，这种方式简单，但是只能操作活动对象，对于测试比较方便，但是不适于开发。")]),s._v(" "),e("p",[s._v("命令式对象配置，可使用操作文件的方式来操作 k8s 资源，对于小型服务比较简单，可以用于开发，但是当项目变大、配置文件变多时，操作起来就比较麻烦。")]),s._v(" "),e("p",[s._v("声明式对象配置，可使用操作目录的方式来操作 k8s 资源，对于大型项目友好，但是出现意外情况可能难以调试。")]),s._v(" "),e("h4",{attrs:{id:"命令式对象管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令式对象管理"}},[s._v("#")]),s._v(" 命令式对象管理")]),s._v(" "),e("p",[s._v("kubectl [command] [type] [name] [flags]")]),s._v(" "),e("ul",[e("li",[s._v("command：指定操作")]),s._v(" "),e("li",[s._v("type：指定资源类型，例如 pod、deployment 等")]),s._v(" "),e("li",[s._v("name：指定资源名称，大小写敏感")]),s._v(" "),e("li",[s._v("flags：指定额外参数")])]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("➜  software kubectl create namespace dev\nnamespace/dev created\n\n➜  software kubectl get ns\nNAME                   STATUS   AGE\ndefault                Active   44h\ndev                    Active   6s\nkube-node-lease        Active   44h\nkube-public            Active   44h\nkube-system            Active   44h\nkubernetes-dashboard   Active   44h\n\n➜  software kubectl run pod --image"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx -n dev  \npod/pod created\n\n➜  software kubectl get pod -n dev -o wide\nNAME   READY   STATUS              RESTARTS   AGE   IP       NODE       NOMINATED NODE   READINESS GATES\npod    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     ContainerCreating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          17s   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("   minikube   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("           "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n➜  software kubectl delete pod pod -n dev\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"pod"')]),s._v(" deleted\n\n➜  software kubectl delete ns dev             \nnamespace "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),s._v(" deleted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br")])]),e("h4",{attrs:{id:"命令式对象配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令式对象配置"}},[s._v("#")]),s._v(" 命令式对象配置")]),s._v(" "),e("p",[s._v("进行配置，IDEA 中有 kubernetes 插件可以方便地使用")]),s._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("---")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginxpod\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("containers\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("1.17.1\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("p",[s._v("根据文件进行配置：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("➜  k8s kubectl create -f nginxpod.yml\nnamespace/dev created\npod/nginxpod created\n➜  k8s kubectl get -f nginxpod.yml \nNAME            STATUS   AGE\nnamespace/dev   Active   10s\n\nNAME           READY   STATUS              RESTARTS   AGE\npod/nginxpod   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     ContainerCreating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          10s\n➜  k8s kubectl delete -f nginxpod.yml \nnamespace "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dev"')]),s._v(" deleted\npod "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginxpod"')]),s._v(" deleted\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br")])]),e("h4",{attrs:{id:"声明式对象配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#声明式对象配置"}},[s._v("#")]),s._v(" 声明式对象配置")]),s._v(" "),e("p",[s._v("声明式对象配置只有一个 apply 命令，他的意思是：资源存在则更新（kubectl patch），不存在则创建（kubectl create）。")]),s._v(" "),e("p",[s._v("删除时则只能用 "),e("code",[s._v("kubectl delete -f")]),s._v(" 了。")]),s._v(" "),e("p",[s._v("推荐创建/更新使用 "),e("code",[s._v("kubectl apply -f")]),s._v("，删除用 "),e("code",[s._v("kubectl delete -f")]),s._v("。")]),s._v(" "),e("h2",{attrs:{id:"资源介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源介绍"}},[s._v("#")]),s._v(" 资源介绍")]),s._v(" "),e("h3",{attrs:{id:"资源简介"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#资源简介"}},[s._v("#")]),s._v(" 资源简介")]),s._v(" "),e("h4",{attrs:{id:"namespace"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#namespace"}},[s._v("#")]),s._v(" Namespace")]),s._v(" "),e("p",[s._v("namespace，命名空间，其实也就是用来实现资源隔离的效果。")]),s._v(" "),e("p",[s._v("在默认情况下，k8s 的各个 pod 均可以相互访问，假如想要实现资源隔离，就可以将不同的 pod 放到不同的 namespace 下。")]),s._v(" "),e("p",[s._v("也可以通过 k8s 的授权机制，将 namespace 交给不同租户管理，这样就实现了多租户的资源隔离。")]),s._v(" "),e("p",[s._v("还可以结合资源配置机制，让不同的租户拥有不同的资源，例如 CPU、内存等，实现租户资源管理。")]),s._v(" "),e("p",[s._v("k8s 会默认启动几个 namespace：")]),s._v(" "),e("ul",[e("li",[s._v("default：未指定 namespace 的会默认放到这里。")]),s._v(" "),e("li",[s._v("kube-node-lease：集群心跳维护。")]),s._v(" "),e("li",[s._v("kube-public：公共空间，可以被所有人访问（包括未认证用户）。")]),s._v(" "),e("li",[s._v("kube-system：k8s 集群维护。")])]),s._v(" "),e("p",[s._v("具体操作：")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("查看："),e("code",[s._v("kubectl get ns")])]),s._v(" "),e("p",[s._v("可指定 namespace："),e("code",[s._v("kubectl get ns default")]),s._v(" 是查看 default 这个 namespace")]),s._v(" "),e("p",[s._v("可指定输出格式："),e("code",[s._v("kubectl get ns -o yaml")]),s._v(" 是以 yaml 形式展示，常用的还有 wide、json")]),s._v(" "),e("p",[s._v("查看详情："),e("code",[s._v("kubectl describe ns default")])])]),s._v(" "),e("li",[e("p",[s._v("创建："),e("code",[s._v("kubectl create ns dev")])])]),s._v(" "),e("li",[e("p",[s._v("删除："),e("code",[s._v("kubectl delete ns dev")])])]),s._v(" "),e("li",[e("p",[s._v("使用文件配置：")]),s._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Namespace\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("之后就可使用 "),e("code",[s._v("kubectl apply -f")]),s._v("、"),e("code",[s._v("kubectl delete -f")]),s._v(" 操纵了。")])])]),s._v(" "),e("h4",{attrs:{id:"pod"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pod"}},[s._v("#")]),s._v(" Pod")]),s._v(" "),e("p",[s._v("程序运行在容器中，而容器必须存在于 Pod 中，一个 pod 可放多个容器。pod 是 k8s 中管理的最小单元，集群的各个组件也是以 pod 为单位运行的。")]),s._v(" "),e("p",[s._v("k8s 不会单独运行 pod，而是通过 pod 控制器间接控制 pod。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("创建并运行："),e("code",[s._v("kubectl run nginx --image=nginx:1.17.1 --port=80 --namespace dev")])]),s._v(" "),e("p",[e("code",[s._v("--image")]),s._v("：指定镜像。"),e("code",[s._v("--port")]),s._v("：指定端口。"),e("code",[s._v("--namespace")]),s._v("：指定命名空间。")])]),s._v(" "),e("li",[e("p",[s._v("查看 pod："),e("code",[s._v("kubectl get pods -n dev")])]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("get pods")]),s._v(" 或者 "),e("code",[s._v("get pod")]),s._v(" 均可，k8s 都支持。")])]),s._v(" "),e("li",[e("p",[s._v("查看 pod 详情："),e("code",[s._v("kubectl describe pod nginx -n dev")])])]),s._v(" "),e("li",[e("p",[s._v("删除指定 pod："),e("code",[s._v("kubectl delete pod nginx -n dev")])]),s._v(" "),e("p",[s._v("假如是使用 pod 控制器来进行的创建，那么上面这条命令删除之后，pod 控制器会重新开启一个 pod。")]),s._v(" "),e("p",[s._v("如果想要在 pod 控制器创建之后删除 pod，需要直接删除 pod 控制器。")])])]),s._v(" "),e("h4",{attrs:{id:"label"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#label"}},[s._v("#")]),s._v(" Label")]),s._v(" "),e("p",[s._v("Label 是个标签，可以在资源上进行标识，便于更好地进行管理。Label 的具体表现是 kv 键值对，可以加到任何对象上去（一个对象也可以有任意数量的 Label）。")]),s._v(" "),e("p",[s._v("常用事例：")]),s._v(" "),e("ul",[e("li",[s._v("版本标签："),e("code",[s._v("version: release")]),s._v("、"),e("code",[s._v("version: stable")])]),s._v(" "),e("li",[s._v("环境标签："),e("code",[s._v("env: dev")]),s._v("、"),e("code",[s._v("env: pro")])]),s._v(" "),e("li",[s._v("架构标签："),e("code",[s._v("tier: frontend")]),s._v("、"),e("code",[s._v("tier: backend")])])]),s._v(" "),e("p",[s._v("除了标签之外，还有标签选择器（Label Selector），Label 用于给某个资源对象定义标识，Label Selector 用于查询和筛选拥有某些标签的资源对象。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("命令式：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 给予标签 version=1")]),s._v("\nkubectl label pod nginx "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新标签 version=2")]),s._v("\nkubectl label pod nginx "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" --overwrite\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带标签查看 pod ")]),s._v("\nkubectl get pod nginx --show-labels\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 使用标签选择器")]),s._v("\nkubectl get pod -l "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nkubectl get pod -l version"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除标签")]),s._v("\nkubectl label pod nginx version-\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("配置式：")]),s._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Pod\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" dev\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("version")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1"')]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" pod\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("1.17.1\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("port\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"deployment"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[s._v("#")]),s._v(" Deployment")]),s._v(" "),e("p",[s._v("属于 pod 控制器的一种，pod 控制器可以控制 pod，k8s 一般使用 pod 控制器来控制 pod。")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("命令方式：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建太过繁琐，只说查看、删除")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看创建的 deployment")]),s._v("\nkubectl get deploy\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看详细信息")]),s._v("\nkubectl describe deploy nginx\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除")]),s._v("\nkubectl delete deploy nginx\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("配置方式：")]),s._v(" "),e("div",{staticClass:"language-yml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-yml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("apiVersion")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" apps/v1\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("kind")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deployment\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("namespace")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" default\n"),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("replicas")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("selector")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("matchLabels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n  "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("template")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("metadata")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("labels")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n    "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("spec")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containers")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("image")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" nginx"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("1.17.1\n          "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ports")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("containerPort")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n              "),e("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("protocol")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" TCP\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])])])]),s._v(" "),e("h4",{attrs:{id:"service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#service"}},[s._v("#")]),s._v(" Service")]),s._v(" "),e("p",[s._v("每个 pod 都会分配一个 pod IP，然而:")]),s._v(" "),e("ol",[e("li",[s._v("pod IP 会根据 pod 重建产生变化。")]),s._v(" "),e("li",[s._v("pod IP 仅仅是集群内的，外部无法访问。")])]),s._v(" "),e("p",[s._v("k8s 设计了 service 来解决以上的两个问题。service 可以看成是一组同类 pod 对外访问的接口，可以实现服务发现和负载均衡。")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("命令式：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集群内部可访问的 service")]),s._v("\nkubectl expose deploy nginx --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service-nginx --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ClusterIP --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" --target-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 创建集群外部可访问的 service")]),s._v("\nkubectl expose deploy nginx --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service-nginx2 --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NodePort --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" --target-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("注意，假如使用的是 minikube，有两个方式可以访问：")]),s._v(" "),e("ol",[e("li",[s._v("进入 k8s 对应的 docker 容器，然后访问。")]),s._v(" "),e("li",[s._v("使用 "),e("code",[s._v("minkube service service-nginx2")]),s._v("，查看对应的 IP 和地址，然后访问。")])])]),s._v(" "),e("li",[e("p",[s._v("配置式：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("apiVersion: v1\nkind: Service\nmetadata:\n  namespace: default\n  name: service-nginx\nspec:\n  clusterIP: 10.109.179.231\n  ports:\n    - port: 80\n      protocol: TCP\n      targetPort: 80\n  selector:\n    run: nginx\n  type: ClusterIP\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])])])])}),[],!1,null,null,null);t.default=n.exports},736:function(s,t,a){s.exports=a.p+"assets/img/2022-07-06-11-31-49.a754f2c2.png"}}]);