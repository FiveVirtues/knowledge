<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JVM-01-概述 | 知识库</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials">
    <meta name="description" content="">
    <meta property="og:url" content="/backend/JVM/part1.html">
    <meta property="og:site_name" content="知识库">
    <meta property="og:title" content="JVM-01-概述">
    <meta property="og:description" content="JVM 概述 Java 和 JVM 默认使用 JDK8 讲解，切换版本会有说明。 Java 程序的特性是一处编写，到处运行。这个特性主要靠 Java 虚拟机来实现，Java 程序进行编译之后形成字节码文件，字节码文件放到 Java 虚拟机上运行。 对于每一个操作系统，都有不同的虚拟机，虚拟机去适配操作系统（Windows、Linux、Mac），作为字节码到操">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="知识库">
    <meta property="article:author" content="causes">
    <meta property="article:tag" content="jvm">
    <meta name="theme-color" content="#46bd87">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    
    <link rel="preload" href="/assets/css/0.styles.272a7e09.css" as="style"><link rel="preload" href="/assets/js/app.00946664.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Layout.d74da02a.js" as="script"><link rel="preload" href="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.70129eef.js" as="script"><link rel="preload" href="/assets/js/page-JVM-01-概述.ebc66336.js" as="script"><link rel="prefetch" href="/assets/js/54.7c746378.js"><link rel="prefetch" href="/assets/js/55.adda53bb.js"><link rel="prefetch" href="/assets/js/56.0f8d034a.js"><link rel="prefetch" href="/assets/js/57.830d518c.js"><link rel="prefetch" href="/assets/js/58.fcb3cf84.js"><link rel="prefetch" href="/assets/js/59.2826e1cb.js"><link rel="prefetch" href="/assets/js/layout-Blog.65a26112.js"><link rel="prefetch" href="/assets/js/layout-Layout.ae1bffbb.js"><link rel="prefetch" href="/assets/js/layout-NotFound.afd3c492.js"><link rel="prefetch" href="/assets/js/layout-Slide.5d36817b.js"><link rel="prefetch" href="/assets/js/page--6ce8a11a.1f6d1c8c.js"><link rel="prefetch" href="/assets/js/page-Concurrent-01-基础.40d9681c.js"><link rel="prefetch" href="/assets/js/page-Docker-01-基础.83220b10.js"><link rel="prefetch" href="/assets/js/page-Docker-02-进阶.52df0704.js"><link rel="prefetch" href="/assets/js/page-Flink-01-基础.068f6e0e.js"><link rel="prefetch" href="/assets/js/page-Flink-02-进阶.a6789756.js"><link rel="prefetch" href="/assets/js/page-Flink-03-机制.c3604e6d.js"><link rel="prefetch" href="/assets/js/page-Flume.578f4bbc.js"><link rel="prefetch" href="/assets/js/page-Git-01-常用指令.93e85005.js"><link rel="prefetch" href="/assets/js/page-HBase-01-起步.7316acb2.js"><link rel="prefetch" href="/assets/js/page-HBase-02-进阶.11b27c25.js"><link rel="prefetch" href="/assets/js/page-Hadoop-01-起步.f49b25f0.js"><link rel="prefetch" href="/assets/js/page-Hadoop-02-HDFS.c28c360c.js"><link rel="prefetch" href="/assets/js/page-Hadoop-03-MapReduce.01e7c831.js"><link rel="prefetch" href="/assets/js/page-Hadoop-04-Yarn.ffaa99bb.js"><link rel="prefetch" href="/assets/js/page-Hive-01-起步.c51a8ed6.js"><link rel="prefetch" href="/assets/js/page-Hive-02-DDL.62ca23de.js"><link rel="prefetch" href="/assets/js/page-Hive-03-DML.d3eb8c90.js"><link rel="prefetch" href="/assets/js/page-Hive-04-DQL.c2e0815a.js"><link rel="prefetch" href="/assets/js/page-Hive-05-函数.585851e7.js"><link rel="prefetch" href="/assets/js/page-JVM-02-类加载子系统.4442a927.js"><link rel="prefetch" href="/assets/js/page-JVM-03-运行时数据区.947c0cac.js"><link rel="prefetch" href="/assets/js/page-Kafka-01-起步.246fa824.js"><link rel="prefetch" href="/assets/js/page-Kafka-02-架构和API.95741e08.js"><link rel="prefetch" href="/assets/js/page-Kafka-03-组件对接.adf6b6fb.js"><link rel="prefetch" href="/assets/js/page-Kubernetes-01-环境搭建.ee022329.js"><link rel="prefetch" href="/assets/js/page-Kubernetes-02-操作.0263d70c.js"><link rel="prefetch" href="/assets/js/page-Linux-01-基础篇.7a082019.js"><link rel="prefetch" href="/assets/js/page-Linux-02-实际操作篇.a1a0de05.js"><link rel="prefetch" href="/assets/js/page-Linux-03-安装配置.4afb662a.js"><link rel="prefetch" href="/assets/js/page-Linux-04-Shell.4bea5dda.js"><link rel="prefetch" href="/assets/js/page-Proxy.4595451b.js"><link rel="prefetch" href="/assets/js/page-Spark-01-SparkCore.e1b13d59.js"><link rel="prefetch" href="/assets/js/page-Spark-02-SparkSQL.0e447d14.js"><link rel="prefetch" href="/assets/js/page-Zookeeper.d3a8c3a8.js"><link rel="prefetch" href="/assets/js/page-数据结构与算法-01-概述.da9332d8.js"><link rel="prefetch" href="/assets/js/page-注意事项.97c989bf.js"><link rel="prefetch" href="/assets/js/page-设计模式-01-介绍.2a0d66a1.js"><link rel="prefetch" href="/assets/js/page-设计模式-02-创建者模式.4c12c25f.js"><link rel="prefetch" href="/assets/js/page-设计模式-03-结构型模式.af84c495.js"><link rel="prefetch" href="/assets/js/page-设计模式-04-行为型模式.2a0f6172.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.f091f770.js"><link rel="prefetch" href="/assets/js/vendors~mermaid.9c96c271.js"><link rel="prefetch" href="/assets/js/vendors~photo-swipe.e4b622ba.js"><link rel="prefetch" href="/assets/js/vendors~reveal.80ac799a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.272a7e09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-navbar has-anchor"><header class="navbar"><!----> <div class="content__navbar-start"></div> <button title="Sidebar Button" class="sidebar-button"><span class="icon"></span></button> <a href="/" class="home-link router-link-active"><!----> <!----> <span class="site-name can-hide">知识库</span></a> <!----> <div class="content__navbar-center"></div> <div class="links"><button tabindex="-1" aria-hidden="true" class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><span class="default-theme"></span></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0 0 42.667-42.667V128a42.667 42.667 0 0 0-85.334 0v85.333A42.667 42.667 0 0 0 512 256zm384 213.333h-85.333a42.667 42.667 0 0 0 0 85.334H896a42.667 42.667 0 0 0 0-85.334zM256 512a42.667 42.667 0 0 0-42.667-42.667H128a42.667 42.667 0 0 0 0 85.334h85.333A42.667 42.667 0 0 0 256 512zm9.387-298.667a42.667 42.667 0 0 0-59.307 62.72l61.44 59.307a42.667 42.667 0 0 0 31.147 11.947 42.667 42.667 0 0 0 30.72-13.227 42.667 42.667 0 0 0 0-60.16zm459.946 133.974a42.667 42.667 0 0 0 29.44-11.947l61.44-59.307a42.667 42.667 0 0 0-57.6-62.72l-61.44 60.587a42.667 42.667 0 0 0 0 60.16 42.667 42.667 0 0 0 28.16 13.227zM512 768a42.667 42.667 0 0 0-42.667 42.667V896a42.667 42.667 0 0 0 85.334 0v-85.333A42.667 42.667 0 0 0 512 768zm244.48-79.36a42.667 42.667 0 0 0-59.307 61.44l61.44 60.587a42.667 42.667 0 0 0 29.44 11.946 42.667 42.667 0 0 0 30.72-12.8 42.667 42.667 0 0 0 0-60.586zm-488.96 0-61.44 59.307a42.667 42.667 0 0 0 0 60.586 42.667 42.667 0 0 0 30.72 12.8 42.667 42.667 0 0 0 28.587-10.666l61.44-59.307a42.667 42.667 0 0 0-59.307-61.44zM512 341.333A170.667 170.667 0 1 0 682.667 512 170.667 170.667 0 0 0 512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 0 0-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 0 0-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont icon-reco-faq"></i>
  关于
</a></div></nav> <!----> <a rel="noopener noreferrer" href="https://gitlab.com/team401/knowledge" target="_blank" class="repo-link can-hide">
  GitLab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <!----> <div class="content__navbar-end"></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div vocab="https://schema.org/" typeof="Person" class="blogger-info"><div data-balloon-pos="" role="navigation" class="blogger"><!----> <div property="name" class="name">知识库</div> <!----></div> <div class="num-wrapper"><div><div class="num">41</div> <div>Articles</div></div> <div><div class="num">3</div> <div>Category</div></div> <div><div class="num">17</div> <div>Tags</div></div> <div><div class="num">41</div> <div>Timeline</div></div></div> <!----></div> <hr> <!----> <div class="content__sidebar-top"></div> <nav class="sidebar-nav-links"><div class="nav-item"><a href="/" class="nav-link router-link-active"><i class="iconfont icon-reco-home"></i>
  首页
</a></div><div class="nav-item"><a href="/about.html" class="nav-link"><i class="iconfont icon-reco-faq"></i>
  关于
</a></div> <a rel="noopener noreferrer" href="https://gitlab.com/team401/knowledge" target="_blank" class="repo-link">
  GitLab
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> <div class="content__sidebar-center"></div> <!----> <!----> <div class="content__sidebar-bottom"></div> <!----></aside> <main class="page"><nav class="breadcrumb disable"><!----></nav> <!----> <div class="content__page-top"></div> <div vocab="https://schema.org/" typeof="Article" class="page-title"><h1><!----> <span property="headline">JVM-01-概述</span></h1> <div class="page-info"><!----> <span aria-label="Author🖊" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon author-icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z" fill="currentColor"></path></svg> <span property="author">causes</span></span><!----><span aria-label="Writing Date📅" data-balloon-pos="down" class="time-info"><svg viewBox="0 0 1030 1024" xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 0 1-33.473-33.473V143.657H180.6A134.314 134.314 0 0 0 46.66 277.595v535.756A134.314 134.314 0 0 0 180.6 947.289h669.74a134.36 134.36 0 0 0 133.94-133.938V277.595a134.314 134.314 0 0 0-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 0 1-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 0 1-33.472 33.473z" fill="currentColor"></path></svg> <span property="datePublished">2021-9-20</span></span><!----><span aria-label="Tags🏷" data-balloon-pos="down"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon tag-icon"><path d="M939.902 458.563 910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 0 0 0 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z" fill="currentColor"></path></svg> <ul class="tags-wrapper"><li class="tag clickable tag0"><span role="navigation">Jvm</span></li></ul> <meta property="keywords" content="Jvm"></span><span aria-label="Reading Time⌛" data-balloon-pos="down" class="reading-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon timer-icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z" fill="currentColor"></path></svg> <span>About 7 min</span> <meta property="timeRequired" content="PT7M"></span></div> <!----> <hr></div> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor"><a href="/backend/JVM/part1/#jvm-概述" class="anchor-link heading2"><div>JVM 概述</div></a></li><li class="anchor"><a href="/backend/JVM/part1/#jvm-整体流程" class="anchor-link heading2"><div>JVM 整体流程</div></a></li></ul></div></aside></div> <!----> <div class="content__content-top"></div> <div class="theme-default-content content__default"><h2 id="jvm-概述"><a href="#jvm-概述" class="header-anchor">#</a> JVM 概述</h2> <p><strong>Java 和 JVM</strong></p> <p>默认使用 JDK8 讲解，切换版本会有说明。</p> <p>Java 程序的特性是一处编写，到处运行。这个特性主要靠 Java 虚拟机来实现，Java 程序进行编译之后形成字节码文件，字节码文件放到 Java 虚拟机上运行。
对于每一个操作系统，都有不同的虚拟机，虚拟机去适配操作系统（Windows、Linux、Mac），作为字节码到操作系统的一层转换措施，所以字节码文件才可以在所有平台上运行。
对于现在来说，Java 虚拟机（Java Virtual Machine、JVM）并不仅仅可以运行 Java 程序，只要字节码符合 Java 虚拟机的规范，都可以在它上面运行。</p> <p><img src="/assets/img/b5ccd9d5-3970-4a82-a56e-8885696a2d64.c318473d.png" alt="JVM 虚拟机"></p> <p><strong>JVM 字节码</strong></p> <p>平常我们说的字节码指的是 Java 编译形成的字节码文件，但是现在 JVM 只会读取符合规则的字节码文件，而不仅仅限定于 Java 编译成的字节码文件，所以叫做 JVM 字节码更合适一些。</p> <p><strong>多语言混合编程</strong></p> <p>软件开发中渐渐靠拢的一个方向是通过特定领域的语言去解决特定领域的问题。而 JVM 可以支持符合规则的字节码文件，这说明其他语言最后形成符合 JVM 规定的字节码文件之后，JVM 同样会执行。</p> <p><strong>JVM 重大事件</strong></p> <ul><li>2000 年，JDK1.3 发布，同时发布了 <code>Java HotSpot Virtual Machine</code>，成为了 Java 的默认虚拟机。</li> <li>2003 年底，Java 平台的 Scala 正式发布，同年 Groovy 也加入了 Java。</li> <li>2006 年，Java 开源并建立了 OpenJDK。顺理成章，Hotspot 虚拟机也成为了 OpenJDK 中的默认虚拟机。</li> <li>2007 年，Java 平台迎来了 Clojure（一种运行在 Java 平台上的 Lisp 语言）。</li> <li>2008 年，Oracle 收购 BEA，得到了 <code>JRockit</code> 虚拟机。</li> <li>2010 年，Oracle 收购了 Sun，获得了 Java 商标和 Hotspot 虚拟机。</li> <li>2011 年，JDK7 发布，正式启用了新的垃圾回收器 <code>G1</code>。</li> <li>2017 年，JDK9 发布。将 G1 设置为默认 GC，代替了 CMS。IBM 的 J9 开源，形成了 Open J9 的社区。</li> <li>2018 年，发布了革命性的 <code>ZGC</code>，调整 JDK 授权许可。</li> <li>2019 年，JDK12 发布，加入 RedHat 领导开发的 <code>Shenandoah GC</code>。</li></ul> <p><strong>JVM 整体结构</strong></p> <p><img src="/assets/img/177dad11-ea5c-43cd-ab64-da5ccbbb86d8.b509e22a.png" alt="简洁版"></p> <p><img src="/assets/img/c0ad914b-7e14-4374-8d15-7125ba10efbb.820f70be.png" alt="详细版"></p> <p><strong>指令集架构和 JVM 的架构模型</strong></p> <p>指令集的架构模型分为两种：</p> <ul><li><p>基于栈的指令集架构：</p> <ul><li>设计和实现更加简单，适用于资源受限的系统。</li> <li>避开了寄存器的分配难题（一地址或者二、甚至三地址指令），转而采用了零地址指令方式分配。</li> <li>指令流的大部分指令是零地址指令，执行过程依赖于操作栈，指令集更小，编译器更加容易实现。</li> <li>不需要硬件支持，可移植性更好。</li></ul></li> <li><p>基于寄存器的指令集架构：</p> <ul><li>性能更加优秀，执行更加高效。</li> <li>花费更少的指令去完成一项操作。</li> <li>大部分情况下，基于寄存器架构的指令往往都是一地址、二地址甚至三地址。</li></ul></li></ul> <p>Java 编译器输入的指令流基本上都是一种基于栈的指令集架构。</p> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>零地址、一地址、二地址、三地址：</p> <p>通常在进行一项操作的时候，往往是 [key - value] 形式，key 就是地址值，value 就是操作数。
一地址，就是说 key 是一个地址，也就是 key-value。二地址是 [(key1, key2) - value]，……。零地址就是 [ value ]。</p></div> <p><strong>JVM 的生命周期</strong></p> <ul><li><p>虚拟机启动：</p> <p>使用引导类加载器（Bootstrap Class Loader）创建的一个初始类来完成，这个类是由虚拟机的具体实现指定的。</p></li> <li><p>虚拟机的执行：</p> <p>虚拟机运行起来之后，执行 Java 程序。执行的这个 Java 程序本质上是一个叫做 Java 虚拟机的进程。</p></li> <li><p>虚拟机的退出（几种情况）：</p> <ul><li>程序正常执行结束时，正常退出。</li> <li>执行过程中遇到了错误，异常终止。</li> <li>操作系统出现了错误，导致 JVM 进程终止。</li> <li>某线程调用了 Runtime 类或者 System 中的 exit 方法，或者 Runtime 中的 halt 方法，并且 Java 安全管理器也允许这次操作。</li> <li>JNI（Java Native Interface）规范描述了使用 JNI Invocation API 来加载或者卸载 JVM 的时候，JVM 的退出情况。</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>exit 或者 halt 方法其实最终调用的时一个本地方法 <code>halt0()</code>。</p> <p>JVM 的整体结构有一个叫做运行时数据区的东西（可以理解为运行时环境），Runtime 就是运行时环境对应的类。</p></div> <p><strong>几款 JVM</strong></p> <div class="custom-block tip"><p class="custom-block-title">Tips</p> <p>JVM 的执行引擎中，存在解释器和即时编译器，他们都可以解析字节码，但是有区别：</p> <p>解释器的缺点时每一行的代码都需要解析，哪怕写了两千次的 for 循环，解释器也会一点不落下。
JIT 编译器会及时将代码编译为本地指令随后缓存这些指令，这样下次就不需要解释执行了，提高了工作效率。</p> <p>但是所有的代码全部都编译也不够好，我们想要的是经常使用的代码（我们称为热点代码）缓存起来，只需要用一次的正常解析，所以解释器和即时编译器两者配合才能发挥更好的效果。</p></div> <ul><li><p>Sun Classic VM：</p> <p>1996 年的 Java1.0 版本，Sun 公司发布了 Sun Classic VM，也是世界上第一款商用虚拟机，JDK1.4 被淘汰。
它只能提供解释器，如果使用 JIT 编译器就需要外挂，但是这样一来解释器就不会工作。也就是说解释器和 JIT 编译器不能同时工作。</p></li> <li><p>Exact VM：</p> <p>JDK1.2 时，Sun 公司提供。
准确式内存管理：可以知道内存中的某个位置存放的数据是什么类型。
具备现代高性能虚拟机的雏形：热点探测、编译器和解释器混合执行。</p> <p>但是它在 Solaris 短暂使用，其他平台当时仍然是 Classic，最终被 Hotspot 代替。</p></li> <li><p>Hotspot：</p> <p>默认虚拟机，至今仍在使用，绝对的市场地位，原来并不是 Sun 的产品，而是 Longview Techonlogies 公司设计，后来被 Sun 收购。后来 Sun 被 Oracle 收购。
之后主要说明的就是 Hotspot，相关的机制主要也是介绍 Hotspot 的机制（例如其他两个 JVM 没有方法区的概念）。</p></li> <li><p>JRockit：</p> <p>来自 BEA。专注于服务端应用，不太关心程序的启动时间，没有了解释器，这代表所有的代码都缓存，响应速度起飞（甚至传言 JRockit 是世界上最快的 JVM），但是启动时间拉长。
一般用于延迟敏感性应用的解决方案，比如军事指挥，电信网络。</p></li> <li><p>J9：</p> <p>来自 IBM，全程 IBM Technology for Java Virtual Machine，见车过 IT4J，内部代号 J9。
定位类似 Hotspot，自封为世界上最快的 Java 虚拟机。2017 年 IBM 开源了 J9，命名为 OpenJ9，交给 Eclipse 基金会管理，也成为 Eclipse OpenJ9。</p></li> <li><p>Taobao：</p> <p>基于 OpenJDK 开发了 AlibabaJDK，简称 AJDK，是整个阿里 Java 的基石。
基于 OpenJDK Hotspot VM 发布的国内第一个优化，深度定制并且开源的高性能服务器版 Java 虚拟机。</p></li></ul> <h2 id="jvm-整体流程"><a href="#jvm-整体流程" class="header-anchor">#</a> JVM 整体流程</h2> <p>在进行讲解之前，最好先有一个大体的印象。</p> <p><img src="/assets/img/865169ab-675e-439b-8d3b-3f32826b6a5d.573986aa.png" alt="类加载子系统全面图"></p> <hr> <p>字节码文件进入到类加载子系统之后，有三个步骤：</p> <ol><li><p>Loading：加载：</p> <p>加载阶段是为了将字节码加载到内存中，需要用到类加载器，有几种典型的类加载器：</p> <ul><li>BootStrapClassLoader：引导类加载器。</li> <li>ExtensionClassLoader：扩展类加载器。</li> <li>ApplicationClassLoader：系统类加载器。</li></ul></li> <li><p>Linking：链接，链接有三个步骤：</p> <ul><li>验证。</li> <li>准备。</li> <li>解析。</li></ul></li> <li><p>Initialization：初始化。</p></li></ol> <hr> <p>字节码文件经过了类加载子系统之后，进入了运行时数据区，运行时数据区包含：</p> <ol><li>PC Register：PC 寄存器（程序计数器），每一个线程都有一个。</li> <li>Stack Area：虚拟机栈，每一个线程一份，每一个线程中的一个一个结构称为栈帧，栈帧也有内部结构，等到之后详细展开。</li> <li>Native Method Stack：本地方法栈，和虚拟机栈的区别是涉及到了本地方法的调用。</li> <li>heap：堆，最大的一块区域，也是 GC 主要考虑的一块空间。堆是线程间共享空间。</li> <li>Method Area：方法区，存放类的信息，一些域的信息，只有 Hotspot 存在方法区这个概念。</li></ol> <hr> <p>执行引擎：和操作系统打交道，相当于一个翻译官，将字节码翻译为物理机器能够识别的机器指令。</p></div> <!----> <div class="content__content-bottom"></div> <footer class="page-meta"><div class="edit-link"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon edit-icon"><path d="M117.953 696.992 64.306 959.696l265.931-49.336 450.204-452.505-212.284-213.376-450.204 452.513zm496.384-296.326L219.039 797.993l-46.108-46.34L568.233 354.33l46.104 46.335zm345.357-122.99-114.45 115.04-212.288-213.377 114.45-115.035 212.288 213.371zm0 0" fill="currentColor"></path></svg> <a href="https://gitlab.com/team401/knowledge/-/edit/main/backend/JVM/part1.md" target="_blank" rel="noopener noreferrer">Edit this page</a></div> <div class="meta-item update-time"><span class="label">Last update:</span> <span class="info">April 29, 2022 16:43</span></div> <div class="meta-item contributors"><span class="label">Contributors: </span> <span class="info"><span title="email: maple.wang@maiscrm.com" class="contributor">
          Maple Wang
        </span> , <span title="email: 2592716753@qq.com" class="contributor">
          causes
        </span> , <span title="email: 2592716753@qq.com" class="contributor">
          红枫
        </span> <!----></span></div></footer> <!----> <!----> <!----> <div class="content__page-bottom"></div></main> <footer class="footer-wrapper"><!----> <div class="footer"><a href="https://beian.miit.gov.cn/#/Integrated/index">鲁ICP备20021989号-2</a></div> <!----></footer></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close" aria-label="Close" class="pswp__button pswp__button--close"></button> <button title="Share" aria-label="Share" class="pswp__button pswp__button--share"></button> <button title="Switch to full screen" aria-label="Switch to full screen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" aria-label="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Prev (Arrow Left)" aria-label="Prev (Arrow Left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (Arrow Right)" aria-label="Next (Arrow Right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></div></div>
    <script src="/assets/js/app.00946664.js" defer></script><script src="/assets/js/vendors~layout-Layout.d74da02a.js" defer></script><script src="/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.70129eef.js" defer></script><script src="/assets/js/page-JVM-01-概述.ebc66336.js" defer></script>
  </body>
</html>
